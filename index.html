<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width,
               initial-scale=1.0,
               maximum-scale=1.0,
               user-scalable=no">

<title>demo</title>

<style>
  * {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
    touch-action: manipulation;
  }

  body {
    margin: 0;
    background: #111;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
  }

  .panel {
    position: relative;
    width: 320px;
    height: 320px;
    margin-bottom: 20px;
  }

  .bar {
    position: absolute;
    background: #444;
    transition: background 0.15s, box-shadow 0.15s;
  }

  .bar.on {
  background: var(--light-color);
  box-shadow: 0 0 10px var(--light-color);
}

  .v { width: 10px; }
  .h { height: 10px; }

  .controls {
    display: flex;
    gap: 12px;
  }

  .controls button {
    background: #222;
    color: #fff;
    border: 1px solid #555;
    padding: 8px 14px;
    font-size: 14px;
    border-radius: 6px;
  }

  .controls button.active {
    background: #fff;
    color: #000;
  }

  .note {
    margin-top: 8px;
    font-size: 12px;
    color: #aaa;
    text-align: center;
    line-height: 1.4;
  }

.color-picker {
  margin-top: 10px;
  font-size: 12px;
  color: #aaa;
}

.color-picker input[type="color"] {
  margin-left: 6px;
  vertical-align: middle;
  background: none;
  border: none;
  padding: 0;
}

:root {
  --light-color: #fff; /* 初期色：白 */
}
</style>
</head>
<body>

<div class="panel" id="panel"></div>

<div class="controls">
  <button data-n="2">2×2</button>
  <button data-n="3" class="active">3×3</button>
  <button data-n="4">4×4</button>
</div>

<div class="color-picker">
  <label>
    色を指定：
    <input type="color" id="colorInput" value="#ffffff">
  </label>
</div>

<div class="note">
  タッチ・クリック：点灯／消灯
　コード生成にChatGPT使用
</div>

<script>
  const panel = document.getElementById('panel');
  const size = 320;
  const barThickness = 10;

  function createBars(innerCount) {
    panel.innerHTML = '';

    const totalLines = innerCount + 1;
    const gap = (size - barThickness) / innerCount;

    // 縦棒
    for (let i = 0; i <= innerCount; i++) {
      const x = Math.round(i * gap);

      for (let j = 0; j < innerCount; j++) {
        const y = Math.round(j * gap + barThickness);

        const v = document.createElement('div');
        v.className = 'bar v';
        v.style.left = x + 'px';
        v.style.top = y + 'px';
        v.style.height = (gap - barThickness) + 'px';

        v.addEventListener('click', () => v.classList.toggle('on'));
        panel.appendChild(v);
      }
    }

    // 横棒
    for (let i = 0; i <= innerCount; i++) {
      const y = Math.round(i * gap);

      for (let j = 0; j < innerCount; j++) {
        const x = Math.round(j * gap + barThickness);

        const h = document.createElement('div');
        h.className = 'bar h';
        h.style.top = y + 'px';
        h.style.left = x + 'px';
        h.style.width = (gap - barThickness) + 'px';

        h.addEventListener('click', () => h.classList.toggle('on'));
        panel.appendChild(h);
      }
    }
  }

  // 初期状態（3本）
  createBars(3);

  // 切り替えボタン
  document.querySelectorAll('.controls button').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.controls button')
        .forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      createBars(Number(btn.dataset.n));
    });
  });


  const colorInput = document.getElementById('colorInput');

  colorInput.addEventListener('input', () => {
  document.documentElement.style
    .setProperty('--light-color', colorInput.value);
});

</script>

</body>
</html>
